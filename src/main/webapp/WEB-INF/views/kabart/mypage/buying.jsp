<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html lang="ko">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>KREAM | 한정판 거래의 FLEX</title>
</head>
<body data-v-39b2348a="" tabindex="0" class="wrap win_os">
	<jsp:include page="../includes/header.jsp"></jsp:include>
	<!---->
	<div id="__nuxt">
		<!---->
		<div id="__layout">
			<div data-v-39b2348a="" tabindex="0" class="wrap win_os">
				<div data-v-39b2348a="" class="container my lg">
					<div data-v-39b2348a="">
						<div data-v-39b2348a="" class="snb_area">
							<a data-v-39b2348a="" href="/my"
								class="nuxt-link-exact-active nuxt-link-active"
								aria-current="page"><h2 data-v-39b2348a=""
									class="snb_main_title">마이 페이지</h2></a>
							<nav data-v-7bcac446="" data-v-39b2348a="" class="snb">
								<div data-v-7bcac446="" class="snb_list">
									<strong data-v-7bcac446="" class="snb_title">쇼핑 정보</strong>
									<ul data-v-4d11470e="" data-v-7bcac446="" class="snb_menu">
										<li data-v-4d11470e="" class="menu_item"><a
											data-v-4d11470e="" href="/my/buying" class="menu_link">
												구매 내역 </a></li>
										<li data-v-4d11470e="" class="menu_item"><a
											data-v-4d11470e="" href="/my/selling" class="menu_link">
												판매 내역 </a></li>

										<li data-v-4d11470e="" class="menu_item"><a
											data-v-4d11470e="" href="/my/wish" class="menu_link"> 관심
												상품 </a></li>
									</ul>
								</div>
								<div data-v-7bcac446="" class="snb_list">
									<strong data-v-7bcac446="" class="snb_title">내 정보</strong>
									<ul data-v-4d11470e="" data-v-7bcac446="" class="snb_menu">
										<li data-v-4d11470e="" class="menu_item"><a
											data-v-4d11470e="" href="/my/profile" class="menu_link">
												프로필 정보 </a></li>
									</ul>
								</div>
							</nav>
						</div>
					</div>
					<div data-v-39b2348a="" class="content_area">
						<div class="my_purchase">
							<div data-v-88eb18f6="" class="content_title">
								<div data-v-88eb18f6="" class="title">
									<h3 data-v-88eb18f6="">구매 내역</h3>
									<!---->
								</div>
								<!---->
							</div>
							<div data-v-0c307fea="" class="purchase_list_tab detail_tab">
								<div data-v-0c307fea="" class="tab_item total">
									<a data-v-0c307fea="" href="https://kream.co.kr/my/buying#"
										class="tab_link"><dl data-v-0c307fea="" class="tab_box">
											<dt data-v-0c307fea="" class="title">전체</dt>
											<dd data-v-0c307fea="" class="count">1</dd>
										</dl></a>
								</div>

								<div data-v-0c307fea="" class="tab_item">
									<a data-v-0c307fea="" href="https://kream.co.kr/my/buying#"
										class="tab_link"><dl data-v-0c307fea="" class="tab_box">
											<dt data-v-0c307fea="" class="title">상품 조회</dt>
											<dd data-v-0c307fea="" class="count">0</dd>
											<!---->
										</dl></a>
								</div>
								<div data-v-0c307fea="" class="tab_item tab_on">
									<a data-v-0c307fea="" href="https://kream.co.kr/my/buying#"
										class="tab_link"><dl data-v-0c307fea="" class="tab_box">
											<dt data-v-0c307fea="" class="title">중고 상품 조회</dt>
											<dd data-v-0c307fea="" class="count">1</dd>
										</dl></a>
								</div>
							</div>
							<div class="period_search">
								<div class="period_calendar_wrapper">
									<div class="period_calendar">
										<div class="calendar_wrap">
											<span><div class="calendar">
													<input type="date" name="dateStart" id="dateStart"
														class="cal_input" title="시작일">
												</div>
												<div data-v-4cb7b681="" class="vc-popover-content-wrapper">
													<!---->
												</div></span>
										</div>
										<span class="swung_dash">~</span>
										<div class="calendar_wrap">
											<span><div class="calendar">
													<input type="date" name="dateEnd" id="dateEnd"
														class="cal_input" title="종료일">
												</div>
												<div data-v-4cb7b681="" class="vc-popover-content-wrapper">
													<!---->
												</div></span>
										</div>
									</div>
									<div class="period_btn_box">
										<button type="button" class="btn_search is_active"
											id="search_period">조회</button>
									</div>
								</div>
							</div>

							<div data-v-50c8b1d2="" class="purchase_list finished bid">
								<div data-v-50c8b1d2="">
									<div data-v-2f988574="" data-v-50c8b1d2="">
										<div data-v-2f988574="" class="purchase_list_display_item"
											style="background-color: rgb(255, 255, 255);">
											<div data-v-2f988574="" class="purchase_list_product">
												<div data-v-2f988574="" class="list_item_img_wrap">
													<img data-v-2f988574="" alt="product_image"
														src="../resources/css/a_2d1ea4b3145d46b5b93ae6c77bc144c8.png"
														class="list_item_img"
														style="background-color: rgb(235, 240, 245);">
													<!---->
												</div>
												<div data-v-2f988574="" class="list_item_title_wrap">
													<p data-v-2f988574="" class="list_item_title">(W) Nike
														Dunk Low Light Smoke Grey</p>
													<p data-v-2f988574="" class="list_item_description">235</p>
												</div>
											</div>
											<div data-v-2f988574="" class="list_item_status">
												<div data-v-2f988574=""
													class="list_item_column column_secondary">
													<p data-v-5f36ea36="" data-v-2f988574=""
														class="secondary_title display_paragraph"
														style="color: rgba(34, 34, 34, 0.5);">2022/11/01</p>
												</div>
												<div data-v-2f988574="" class="list_item_column column_last">
													<p data-v-5f36ea36="" data-v-2f988574=""
														class="last_title display_paragraph"
														style="color: rgb(34, 34, 34);">배송완료</p>
													<p data-v-5f36ea36="" data-v-2f988574=""
														class="last_description display_paragraph"></p>
												</div>
											</div>
										</div>
										<!---->
									</div>
								</div>
								<!---->
								<!---->
								<!---->
								<!---->
								<!---->
							</div>
							<div data-v-4857d0b8="" class="pagination">
								<div data-v-4857d0b8="" class="pagination_box first last">
									<div data-v-4857d0b8="" class="prev_btn_box">
										<a data-v-4857d0b8="" href="https://kream.co.kr/my/buying#"
											class="btn_arr"><svg data-v-4857d0b8=""
												xmlns="http://www.w3.org/2000/svg"
												class="arr-page-first icon sprite-icons">
												<use data-v-4857d0b8=""
													href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-first"
													xlink:href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-first"></use></svg></a><a
											data-v-4857d0b8="" href="https://kream.co.kr/my/buying#"
											class="btn_arr"><svg data-v-4857d0b8=""
												xmlns="http://www.w3.org/2000/svg"
												class="arr-page-prev icon sprite-icons">
												<use data-v-4857d0b8=""
													href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-prev"
													xlink:href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-prev"></use></svg></a>
									</div>
									<div data-v-4857d0b8="" class="page_bind">
										<a data-v-4857d0b8="" href="https://kream.co.kr/my/buying#"
											class="btn_page active"> 1 </a>
									</div>
									<div data-v-4857d0b8="" class="next_btn_box">
										<a data-v-4857d0b8="" href="https://kream.co.kr/my/buying#"
											class="btn_arr"><svg data-v-4857d0b8=""
												xmlns="http://www.w3.org/2000/svg"
												class="arr-page-next icon sprite-icons">
												<use data-v-4857d0b8=""
													href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-next"
													xlink:href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-next"></use></svg></a><a
											data-v-4857d0b8="" href="https://kream.co.kr/my/buying#"
											class="btn_arr"><svg data-v-4857d0b8=""
												xmlns="http://www.w3.org/2000/svg"
												class="arr-page-last icon sprite-icons">
												<use data-v-4857d0b8=""
													href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-last"
													xlink:href="/_nuxt/3182c3b1ca2f77da7bc3e1acf109306c.svg#i-arr-page-last"></use></svg></a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
                  $(function(){
                	 $('#dateEnd').val(new Date().toISOString().slice(0, 7));
                	 $('#dateStart').val(new Date().toISOString().slice(0, 7));
                	  function date_add(sDate, nDays) {
                		  var yy = parseInt(sDate.substr(0, 4), 10);
                		    var mm = parseInt(sDate.substr(5, 2), 10);
                		    var dd = parseInt(sDate.substr(8), 10);
                		    d = new Date(yy, mm - 1, dd + nDays);
                		    yy = (d.getFullYear()+"").substr(2,4);
                		    mm = d.getMonth() + 1; mm = (mm < 10) ? '0' + mm : mm;
                		    dd = d.getDate(); dd = (dd < 10) ? '0' + dd : dd;
                		    return '' + yy + '/' +  mm  + '/' + dd;
                		}
                     $("#search_period").click(function(){
                        const start_date =date_add($("#dateStart").val(),0);
                        const end_date = date_add($("#dateEnd").val(),1);
                		console.log(start_date);
                		console.log(end_date);
                        var txt = '주문날짜';
                        if(start_date>=end_date){
                           alert("종료일이 시작일보다 앞일 수 없습니다.");
                           return ;
                        }
                        $.ajax({
                            url:'/search/buying',
                            data :{mem_id : "test",
                               start_date : start_date,
                                      end_date : end_date,
                                      is_used : 0
                            },
                            contentType:"application/json",
                            success : function(result){
                               console.log(result);
                               if(result.length==0){
                            	   var row = "<div data-v-e2f6767a='' data-v-0d2f7c95='' class='empty_area'><p data-v-e2f6767a='' class='desc'>거래 내역이 없습니다.</p></div>";
                               }else {
                                  var row ="";
                               for (var i = 0; i < result.length; i++) {
                                  let price = [i].pro_price.toLocaleString('ko-KR');
                                  var d_val = obj[i].cancle_date;
                                  var status = '주문취소';
                                  if(!obj[i].cancle_date){
                                 	 d_val = obj[i].order_date;
                                 	 status = '주문완료'
                                  }
                                  row += `<div class='row'><div class='inner'><div class='cell-pd-wrap'><div class='inner-row'><div class='info-row'><div class='cell-pd'><div class='item-img' godno='GM0122062466107'>
                                     <a href='Hfashion?command=detail&pno=${obj[i].pro_no}'> <img src='${contextPath}/\${obj[i].img_url}'></a></div><div class='item-info'><div class='item-brand'>
                                                     <a href='Hfashion?command=detail&pno=${obj[i].pro_no}'>\${obj[i].brand_name} </a></div><div class=item-name clear-ellipsis>
                                                     <a href='Hfashion?command=detail&pno=${obj[i].pro_no}'>\${obj[i].pro_name}</a></div><div class='item-opt'>
                                                     <a href='Hfashion?command=detail&pno=${obj[i].pro_no}'><span>\${obj[i].product_option}</span> <span>수량 : \${obj[i].order_amount} </a></div><div class="item-btn"></div>
                                                 </div></div><div class='cell-price'><div class='cell-inner'><div class='price'><span><span class='num'>\${price}</span> 원</span>
                                                   </div></div></div><div class='cell-status'><div class='cell-inner'><div class='status'>\${txt}<br> <span class='txt-cmt pcolor'>\${obj[i].order_date}</br>\${status}</span></div></div></div></div></div></div></div></div></div></div>`;
                               }
                               }
                               $(".purchase_list").html(row);
                               
                            },
                            error : function(e){
                               alert('조회 실패');
                            }
                         })
                        
                        
                     });
                  })
               </script>




	<!-- footer -->
	<jsp:include page="../includes/footer.jsp"></jsp:include>

</body>
</html>